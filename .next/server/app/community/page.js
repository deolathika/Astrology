(()=>{var e={};e.id=4616,e.ids=[4616],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},69089:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>m,routeModule:()=>x,tree:()=>o}),s(2889),s(64968),s(35866);var a=s(23191),r=s(88716),i=s(37922),n=s.n(i),l=s(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["community",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2889)),"/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/community/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,64968)),"/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/community/page.tsx"],d="/community/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/community/page",pathname:"/community",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},24489:(e,t,s)=>{Promise.resolve().then(s.bind(s,18726))},76557:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(17577),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:o,...m},d)=>(0,a.createElement)("svg",{ref:d,...r,width:n,height:n,stroke:s,strokeWidth:c?24*Number(l)/Number(n):l,className:`lucide lucide-${i(e)}`,...m},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(o)?o:[o])||[]]));return s.displayName=`${e}`,s}},41137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},67427:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},39730:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},58038:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},18726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(10326),r=s(17577),i=s(16856),n=s(86462),l=s(24061),c=s(88307),o=s(41137),m=s(67427),d=s(39730),u=s(58038);let x=(0,s(76557).Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var h=s(40381);let p=["✨","\uD83C\uDF1F","\uD83D\uDCAB","\uD83C\uDF19","☀️","\uD83C\uDF3A","\uD83C\uDF38","\uD83C\uDF3C","\uD83C\uDF3B","\uD83C\uDF37","\uD83D\uDC96","\uD83D\uDC95","\uD83D\uDC97","\uD83D\uDC9D","\uD83D\uDC8E","\uD83D\uDD2E","\uD83C\uDFAD","\uD83C\uDFA8","\uD83C\uDFAA","\uD83C\uDFAF","\uD83C\uDF08","☁️","\uD83C\uDF0A","\uD83D\uDD25","\uD83C\uDF0D","\uD83C\uDF0E","\uD83C\uDF0F","\uD83C\uDF0C","⭐","\uD83C\uDF1F"];function f(){let[e,t]=(0,r.useState)([]),[s,f]=(0,r.useState)([]),[y,g]=(0,r.useState)(null),[j,v]=(0,r.useState)(""),[N,D]=(0,r.useState)(!1),[b,C]=(0,r.useState)(!1),[w,k]=(0,r.useState)(""),[E,P]=(0,r.useState)(!0),S=e=>{D(e),localStorage.setItem("communityConsent",e.toString()),C(!1),e?h.Am.success("Welcome to the community!"):(0,h.Am)("You can join the community anytime in settings")},A=async e=>{if(!N){h.Am.error("Please consent to community participation first");return}try{if((await fetch("/api/community/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sendMessage",payload:{senderId:"current_user",senderName:"You",emoji:e}})})).ok){let t={id:Date.now().toString(),fromId:"current_user",fromName:"You",emoji:e,timestamp:new Date().toISOString(),isModerated:!1};f(e=>[t,...e]),h.Am.success("Message sent!")}}catch(e){h.Am.error("Failed to send message")}},_=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-gray-600",F=e.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.zodiacSign.toLowerCase().includes(w.toLowerCase()));return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 text-gray-800 p-4",children:(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-gradient-primary flex items-center",children:[a.jsx(l.Z,{className:"w-8 h-8 mr-3"}),"Community"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Connect with like-minded cosmic souls"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.Z,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:e=>k(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]}),(0,a.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Discover Connections"}),a.jsx("div",{className:"space-y-4",children:F.map(e=>a.jsx(i.E.div,{whileHover:{scale:1.02},className:"card p-4 cursor-pointer hover:shadow-lg transition-all",onClick:()=>g(e),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-500 text-white flex items-center justify-center font-semibold",children:e.avatar}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.zodiacSign," • Life Path ",e.lifePathNumber]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${e.isOnline?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-xs text-gray-500",children:e.isOnline?"Online":e.lastSeen}),(0,a.jsxs)("span",{className:`text-xs font-medium ${_(e.compatibilityScore)}`,children:[e.compatibilityScore,"% match"]})]})]}),a.jsx(m.Z,{className:"w-5 h-5 text-pink-500"})]})},e.id))})]}),a.jsx("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"card p-6 h-96 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(d.Z,{className:"w-5 h-5 mr-2"}),"Community Chat"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${E?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm text-gray-500",children:E?"Online":"Offline"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(d.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),a.jsx("p",{className:"text-gray-500",children:"Be the first to share a cosmic emoji!"})]}):s.map(e=>(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex items-center space-x-3 ${"current_user"===e.fromId?"justify-end":"justify-start"}`,children:["current_user"!==e.fromId&&a.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-500 text-white flex items-center justify-center text-sm font-semibold",children:e.fromName.charAt(0)}),(0,a.jsxs)("div",{className:`flex items-center space-x-2 ${"current_user"===e.fromId?"flex-row-reverse":""}`,children:[a.jsx("div",{className:"text-2xl",children:e.emoji}),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]}),"current_user"===e.fromId&&a.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-500 text-white flex items-center justify-center text-sm font-semibold",children:"Y"})]},e.id))}),N?(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.map(e=>a.jsx("button",{onClick:()=>A(e),className:"w-10 h-10 text-2xl hover:bg-gray-100 rounded-lg transition-colors flex items-center justify-center",children:e},e))}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Click an emoji to send it to the community"})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx(u.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Consent required to participate"})]})]})})]}),a.jsx(n.M,{children:b&&a.jsx(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(i.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"card p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx(u.Z,{className:"w-16 h-16 text-violet-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Join the Community"}),a.jsx("p",{className:"text-gray-600",children:"Connect with other cosmic souls through emoji-only chat. Your privacy is protected."})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(x,{className:"w-5 h-5 text-green-500 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Safe Communication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Only emojis allowed - no text messages"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(u.Z,{className:"w-5 h-5 text-blue-500 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Privacy Protected"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Your personal data stays private"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx(m.Z,{className:"w-5 h-5 text-pink-500 mt-1"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Cosmic Connections"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Find your astrological soulmates"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>S(!1),className:"btn btn-secondary flex-1",children:"Maybe Later"}),a.jsx("button",{onClick:()=>S(!0),className:"btn btn-primary flex-1",children:"Join Community"})]})]})})})]})})}},2889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/community/page.tsx#default`)},86462:(e,t,s)=>{"use strict";s.d(t,{M:()=>f});var a=s(17577),r=s(42482);function i(){let e=(0,a.useRef)(!1);return(0,r.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var n=s(80805),l=s(40295),c=s(74749);class o extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:t}){let s=(0,a.useId)(),r=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)(()=>{let{width:e,height:a,top:n,left:l}=i.current;if(t||!r.current||!e||!a)return;r.current.dataset.motionPopId=s;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${n}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),a.createElement(o,{isPresent:t,childRef:r,sizeRef:i},a.cloneElement(e,{ref:r}))}let d=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:o})=>{let d=(0,c.h)(u),x=(0,a.useId)(),h=(0,a.useMemo)(()=>({id:x,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;r&&r()},register:e=>(d.set(e,!1),()=>d.delete(e))}),n?void 0:[s]);return(0,a.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[s]),a.useEffect(()=>{s||d.size||!r||r()},[s]),"popLayout"===o&&(e=a.createElement(m,{isPresent:s},e)),a.createElement(l.O.Provider,{value:h},e)};function u(){return new Map}var x=s(40339),h=s(24673);let p=e=>e.key||"",f=({children:e,custom:t,initial:s=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:m="sync"})=>{var u;(0,h.k)(!c,"Replace exitBeforeEnter with mode='wait'");let f=(0,a.useContext)(x.p).forceRender||function(){let e=i(),[t,s]=(0,a.useState)(0),r=(0,a.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,a.useCallback)(()=>n.Wi.postRender(r),[r]),t]}()[0],y=i(),g=function(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}(e),j=g,v=(0,a.useRef)(new Map).current,N=(0,a.useRef)(j),D=(0,a.useRef)(new Map).current,b=(0,a.useRef)(!0);if((0,r.L)(()=>{b.current=!1,function(e,t){e.forEach(e=>{let s=p(e);t.set(s,e)})}(g,D),N.current=j}),u=()=>{b.current=!0,D.clear(),v.clear()},(0,a.useEffect)(()=>()=>u(),[]),b.current)return a.createElement(a.Fragment,null,j.map(e=>a.createElement(d,{key:p(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:m},e)));j=[...j];let C=N.current.map(p),w=g.map(p),k=C.length;for(let e=0;e<k;e++){let t=C[e];-1!==w.indexOf(t)||v.has(t)||v.set(t,void 0)}return"wait"===m&&v.size&&(j=[]),v.forEach((e,s)=>{if(-1!==w.indexOf(s))return;let r=D.get(s);if(!r)return;let i=C.indexOf(s),n=e;n||(n=a.createElement(d,{key:p(r),isPresent:!1,onExitComplete:()=>{v.delete(s);let e=Array.from(D.keys()).filter(e=>!w.includes(e));if(e.forEach(e=>D.delete(e)),N.current=g.filter(t=>{let a=p(t);return a===s||e.includes(a)}),!v.size){if(!1===y.current)return;f(),l&&l()}},custom:t,presenceAffectsLayout:o,mode:m},r),v.set(s,n)),j.splice(i,0,n)}),j=j.map(e=>{let t=e.key;return v.has(t)?e:a.createElement(d,{key:p(e),isPresent:!0,presenceAffectsLayout:o,mode:m},e)}),a.createElement(a.Fragment,null,v.size?j:j.map(e=>(0,a.cloneElement)(e)))}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,4216,6856,9265],()=>s(69089));module.exports=a})();