"use strict";(()=>{var e={};e.id=285,e.ids=[285],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55160:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d});var n={};i.r(n),i.d(n,{POST:()=>p});var o=i(49303),a=i(88716),s=i(60670),r=i(87070);async function p(e){try{let{subscription:t,notification:i}=await e.json();if(!t||!i)return r.NextResponse.json({error:"Subscription and notification data are required"},{status:400});let n=await fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{Authorization:`key=${process.env.FIREBASE_SERVER_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({to:t.endpoint,notification:{title:i.title,body:i.body,icon:i.icon||"/icon-192.png",badge:i.badge||"/icon-192.png",image:i.image,tag:i.tag,data:i.data,requireInteraction:i.requireInteraction||!1,silent:i.silent||!1}})});if(n.ok)return r.NextResponse.json({success:!0,message:"Push notification sent successfully"});throw Error(`FCM request failed: ${n.statusText}`)}catch(e){return r.NextResponse.json({error:"Failed to send push notification"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/notifications/send/route",pathname:"/api/notifications/send",filename:"route",bundlePath:"app/api/notifications/send/route"},resolvedPagePath:"/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/api/notifications/send/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:l}=u,f="/api/notifications/send/route";function g(){return(0,s.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[276,972],()=>i(55160));module.exports=n})();