"use strict";(()=>{var e={};e.id=495,e.ids=[495],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39796:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p});var n={};a.r(n),a.d(n,{GET:()=>u});var i=a(49303),s=a(88716),o=a(60670),r=a(87070),l=a(5919);async function u(e){try{let{searchParams:t}=new URL(e.url);if(!t.get("profileId"))return r.NextResponse.json({error:"Profile ID is required"},{status:400});let a={year:1990,month:1,day:1,hour:12,minute:0,latitude:40.7128,longitude:-74.006,timezone:-5},n=await l.f.calculateAstrologyData(a);return r.NextResponse.json({success:!0,data:{meta:{tz:a.timezone,system:"tropical",engine:"swiss_ephemeris"},natal:{tropical:{planets:n.planets,asc:n.ascendant,mc:n.midheaven,houses:n.houses},sidereal:{planets:[],asc:0,mc:0,houses:[]}},vedic:{nakshatra:{name:"Ashwini",pada:1},dasha:[{planet:"Sun",start:"2020-01-01",end:"2026-01-01"}]}}})}catch(e){return r.NextResponse.json({error:"Failed to calculate natal chart"},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/astro/natal/route",pathname:"/api/astro/natal",filename:"route",bundlePath:"app/api/astro/natal/route"},resolvedPagePath:"/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/api/astro/natal/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:h}=c,g="/api/astro/natal/route";function m(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}},5919:(e,t,a)=>{a.d(t,{f:()=>i});class n{constructor(){this.isInitialized=!1,this.backendUrl=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",this.initialize()}async initialize(){try{console.log("Initializing Swiss Ephemeris via backend..."),this.isInitialized=!0}catch(e){throw console.error("Failed to initialize Swiss Ephemeris:",e),Error("Swiss Ephemeris initialization failed")}}async calculatePlanetaryPositions(e){this.isInitialized||await this.initialize();try{return console.log("Using mock planetary positions for development"),this.getMockPlanetaryPositions()}catch(e){return console.error("Failed to calculate planetary positions:",e),this.getMockPlanetaryPositions()}}getMockPlanetaryPositions(){return["Sun","Moon","Mercury","Venus","Mars","Jupiter","Saturn","Uranus","Neptune","Pluto","North Node","South Node"].map((e,t)=>({name:e,longitude:360*Math.random(),latitude:(Math.random()-.5)*10,distance:1+2*Math.random(),speed:2*Math.random()-1}))}async calculateHouseCusps(e){this.isInitialized||await this.initialize();try{return console.log("Using mock house cusps for development"),this.getMockHouseCusps()}catch(e){return console.error("Failed to calculate house cusps:",e),this.getMockHouseCusps()}}getMockHouseCusps(){let e=[];for(let t=1;t<=12;t++)e.push({house:t,longitude:360*Math.random()});return e}getZodiacSign(e){return["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"][Math.floor(e/30)%12]}async calculateAstrologyData(e){let t=await this.calculatePlanetaryPositions(e),a=await this.calculateHouseCusps(e),n=t.find(e=>"Sun"===e.name),i=t.find(e=>"Moon"===e.name),s=a.find(e=>1===e.house)?.longitude||0,o=a.find(e=>10===e.house)?.longitude||0;return{planets:t,houses:a,ascendant:s,midheaven:o,sunSign:n?this.getZodiacSign(n.longitude):"Unknown",moonSign:i?this.getZodiacSign(i.longitude):"Unknown",risingSign:this.getZodiacSign(s)}}async calculateTransits(e,t){let a={...t,year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()};return this.calculatePlanetaryPositions(a)}calculateAspects(e){let t=[],a=[{name:"Conjunction",angle:0,orb:8},{name:"Sextile",angle:60,orb:6},{name:"Square",angle:90,orb:8},{name:"Trine",angle:120,orb:8},{name:"Opposition",angle:180,orb:8}];for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length;i++){let s=e[n],o=e[i],r=Math.abs(s.longitude-o.longitude),l=Math.min(r,360-r);for(let e of a)Math.abs(l-e.angle)<=e.orb&&t.push({planet1:s.name,planet2:o.name,aspect:e.name,orb:Math.abs(l-e.angle)})}return t}}let i=new n}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[276,972],()=>a(39796));module.exports=n})();