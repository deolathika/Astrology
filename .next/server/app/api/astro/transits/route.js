"use strict";(()=>{var t={};t.id=4938,t.ids=[4938],t.modules={20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1054:(t,a,e)=>{e.r(a),e.d(a,{originalPathname:()=>m,patchFetch:()=>p,requestAsyncStorage:()=>c,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var i={};e.r(i),e.d(i,{GET:()=>l});var n=e(49303),s=e(88716),r=e(60670),o=e(87070),u=e(5919);async function l(t){try{var a,e;let{searchParams:i}=new URL(t.url),n=i.get("profileId"),s=i.get("date")||new Date().toISOString().split("T")[0];if(!n)return o.NextResponse.json({error:"Profile ID is required"},{status:400});let r={year:1990,month:1,day:1,hour:12,minute:0,second:0,latitude:40.7128,longitude:-74.006,timezone:-5},l=new Date(s),h=function(t){let a=[{name:"New Moon",illumination:0,ageDays:0},{name:"Waxing Crescent",illumination:25,ageDays:3},{name:"First Quarter",illumination:50,ageDays:7},{name:"Waxing Gibbous",illumination:75,ageDays:10},{name:"Full Moon",illumination:100,ageDays:14},{name:"Waning Gibbous",illumination:75,ageDays:18},{name:"Last Quarter",illumination:50,ageDays:21},{name:"Waning Crescent",illumination:25,ageDays:25}],e=Math.floor(t.getDate()/28*a.length);return a[e%a.length]}(l),c=function(t){let a=(t.getDate()-1)%30;return{index:a+1,name:["Pratipada","Dwitiya","Tritiya","Chaturthi","Panchami","Shashthi","Saptami","Ashtami","Navami","Dashami","Ekadashi","Dwadashi","Trayodashi","Chaturdashi","Purnima","Pratipada","Dwitiya","Tritiya","Chaturthi","Panchami","Shashthi","Saptami","Ashtami","Navami","Dashami","Ekadashi","Dwadashi","Trayodashi","Chaturdashi","Amavasya"][a]}}(l),d=function(t,a,e){let i=["Sun","Venus","Mercury","Moon","Saturn","Jupiter","Mars"],n=[];for(let t=0;t<24;t++){let a=t,e=t+1,s=Math.floor(t/3.43)%i.length;n.push({start:`${a.toString().padStart(2,"0")}:00`,end:`${e.toString().padStart(2,"0")}:00`,ruler:i[s]})}return n}(0,r.latitude,r.longitude),g=(r.latitude,r.longitude,["07:30–09:00","09:00–10:30","10:30–12:00","12:00–13:30","13:30–15:00","15:00–16:30","16:30–18:00"][l.getDay()]||"13:30–15:00"),m=await u.f.calculateTransits(l,r);return o.NextResponse.json({success:!0,data:{moon:{phase:h.name,illumination:h.illumination,ageDays:h.ageDays},tithi:{index:c.index,name:c.name},planetaryHours:d,rahuKalam:g,hits:m.map(t=>({planet:t.name,aspect:"conjunction",house:1,score:85,summary:`${t.name} transit brings new opportunities`}))}})}catch(t){return o.NextResponse.json({error:"Failed to calculate transits"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/astro/transits/route",pathname:"/api/astro/transits",filename:"route",bundlePath:"app/api/astro/transits/route"},resolvedPagePath:"/Users/lathikadissanayaka/P E R S O N A L/daily_secrets_app/src/app/api/astro/transits/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:g}=h,m="/api/astro/transits/route";function p(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},5919:(t,a,e)=>{e.d(a,{f:()=>n});class i{constructor(){this.isInitialized=!1,this.backendUrl=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",this.initialize()}async initialize(){try{this.isInitialized=!0}catch(t){throw Error("Swiss Ephemeris initialization failed")}}async calculatePlanetaryPositions(t){this.isInitialized||await this.initialize();try{return this.getMockPlanetaryPositions()}catch(t){return this.getMockPlanetaryPositions()}}getMockPlanetaryPositions(){return["Sun","Moon","Mercury","Venus","Mars","Jupiter","Saturn","Uranus","Neptune","Pluto","North Node","South Node"].map((t,a)=>({name:t,longitude:360*Math.random(),latitude:(Math.random()-.5)*10,distance:1+2*Math.random(),speed:2*Math.random()-1}))}async calculateHouseCusps(t){this.isInitialized||await this.initialize();try{return this.getMockHouseCusps()}catch(t){return this.getMockHouseCusps()}}getMockHouseCusps(){let t=[];for(let a=1;a<=12;a++)t.push({house:a,longitude:360*Math.random()});return t}getZodiacSign(t){return["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"][Math.floor(t/30)%12]}async calculateAstrologyData(t){let a=await this.calculatePlanetaryPositions(t),e=await this.calculateHouseCusps(t),i=a.find(t=>"Sun"===t.name),n=a.find(t=>"Moon"===t.name),s=e.find(t=>1===t.house)?.longitude||0,r=e.find(t=>10===t.house)?.longitude||0;return{planets:a,houses:e,ascendant:s,midheaven:r,sunSign:i?this.getZodiacSign(i.longitude):"Unknown",moonSign:n?this.getZodiacSign(n.longitude):"Unknown",risingSign:this.getZodiacSign(s)}}async calculateTransits(t,a){let e={...a,year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()};return this.calculatePlanetaryPositions(e)}calculateAspects(t){let a=[],e=[{name:"Conjunction",angle:0,orb:8},{name:"Sextile",angle:60,orb:6},{name:"Square",angle:90,orb:8},{name:"Trine",angle:120,orb:8},{name:"Opposition",angle:180,orb:8}];for(let i=0;i<t.length;i++)for(let n=i+1;n<t.length;n++){let s=t[i],r=t[n],o=Math.abs(s.longitude-r.longitude),u=Math.min(o,360-o);for(let t of e)Math.abs(u-t.angle)<=t.orb&&a.push({planet1:s.name,planet2:r.name,aspect:t.name,orb:Math.abs(u-t.angle)})}return a}}let n=new i}};var a=require("../../../../webpack-runtime.js");a.C(t);var e=t=>a(a.s=t),i=a.X(0,[9276,5972],()=>e(1054));module.exports=i})();