(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4616],{5488:function(e,t,s){Promise.resolve().then(s.bind(s,9387))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:m,children:u,...d}=s;return(0,a.createElement)("svg",{ref:r,...i,width:l,height:l,stroke:c,strokeWidth:m?24*Number(o)/Number(l):o,className:"lucide lucide-".concat(n(e)),...d},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},2718:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9387:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),i=s(2265),n=s(429),r=s(5095),c=s(5805),l=s(3247),o=s(740),m=s(8997),u=s(2718),d=s(8906);let x=(0,s(9763).Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var h=s(9064);let f=["✨","\uD83C\uDF1F","\uD83D\uDCAB","\uD83C\uDF19","☀️","\uD83C\uDF3A","\uD83C\uDF38","\uD83C\uDF3C","\uD83C\uDF3B","\uD83C\uDF37","\uD83D\uDC96","\uD83D\uDC95","\uD83D\uDC97","\uD83D\uDC9D","\uD83D\uDC8E","\uD83D\uDD2E","\uD83C\uDFAD","\uD83C\uDFA8","\uD83C\uDFAA","\uD83C\uDFAF","\uD83C\uDF08","☁️","\uD83C\uDF0A","\uD83D\uDD25","\uD83C\uDF0D","\uD83C\uDF0E","\uD83C\uDF0F","\uD83C\uDF0C","⭐","\uD83C\uDF1F"];function p(){let[e,t]=(0,i.useState)([]),[s,p]=(0,i.useState)([]),[y,g]=(0,i.useState)(null),[j,N]=(0,i.useState)(""),[v,D]=(0,i.useState)(!1),[w,C]=(0,i.useState)(!1),[b,k]=(0,i.useState)(""),[S,E]=(0,i.useState)(!0);(0,i.useEffect)(()=>{F(),Z()},[]);let F=async()=>{try{let e=await fetch("/api/community/chat?action=discover_connections&userZodiac=Leo&limit=10");if(e.ok){let s=await e.json();t(s.connections||[])}let s=await fetch("/api/community/chat?action=getRecentMessages&limit=20");if(s.ok){let e=await s.json();p(e.messages||[])}}catch(e){t([{id:"1",name:"Alex Johnson",zodiacSign:"Gemini",lifePathNumber:7,avatar:"AJ",isOnline:!0,lastSeen:"now",compatibilityScore:85},{id:"2",name:"Sarah Chen",zodiacSign:"Sagittarius",lifePathNumber:3,avatar:"SC",isOnline:!1,lastSeen:"2 hours ago",compatibilityScore:92},{id:"3",name:"Maya Patel",zodiacSign:"Cancer",lifePathNumber:9,avatar:"MP",isOnline:!0,lastSeen:"now",compatibilityScore:78}]),p([{id:"1",fromId:"1",fromName:"Alex Johnson",emoji:"✨",timestamp:new Date().toISOString(),isModerated:!1},{id:"2",fromId:"2",fromName:"Sarah Chen",emoji:"\uD83C\uDF1F",timestamp:new Date(Date.now()-36e5).toISOString(),isModerated:!1}])}},Z=()=>{let e=localStorage.getItem("communityConsent");D("true"===e),e||C(!0)},A=e=>{D(e),localStorage.setItem("communityConsent",e.toString()),C(!1),e?h.Am.success("Welcome to the community!"):(0,h.Am)("You can join the community anytime in settings")},M=async e=>{if(!v){h.Am.error("Please consent to community participation first");return}try{if((await fetch("/api/community/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sendMessage",payload:{senderId:"current_user",senderName:"You",emoji:e}})})).ok){let t={id:Date.now().toString(),fromId:"current_user",fromName:"You",emoji:e,timestamp:new Date().toISOString(),isModerated:!1};p(e=>[t,...e]),h.Am.success("Message sent!")}}catch(e){h.Am.error("Failed to send message")}},P=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-gray-600",O=e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.zodiacSign.toLowerCase().includes(b.toLowerCase()));return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 text-gray-800 p-4",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-gradient-primary flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 mr-3"}),"Community"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Connect with like-minded cosmic souls"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:b,onChange:e=>k(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]}),(0,a.jsxs)("button",{className:"btn btn-secondary flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Discover Connections"}),(0,a.jsx)("div",{className:"space-y-4",children:O.map(e=>(0,a.jsx)(n.E.div,{whileHover:{scale:1.02},className:"card p-4 cursor-pointer hover:shadow-lg transition-all",onClick:()=>g(e),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-violet-500 text-white flex items-center justify-center font-semibold",children:e.avatar}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.zodiacSign," • Life Path ",e.lifePathNumber]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isOnline?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.isOnline?"Online":e.lastSeen}),(0,a.jsxs)("span",{className:"text-xs font-medium ".concat(P(e.compatibilityScore)),children:[e.compatibilityScore,"% match"]})]})]}),(0,a.jsx)(m.Z,{className:"w-5 h-5 text-pink-500"})]})},e.id))})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"card p-6 h-96 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Community Chat"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(S?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:S?"Online":"Offline"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Be the first to share a cosmic emoji!"})]}):s.map(e=>(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center space-x-3 ".concat("current_user"===e.fromId?"justify-end":"justify-start"),children:["current_user"!==e.fromId&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-violet-500 text-white flex items-center justify-center text-sm font-semibold",children:e.fromName.charAt(0)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ".concat("current_user"===e.fromId?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"text-2xl",children:e.emoji}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]}),"current_user"===e.fromId&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-violet-500 text-white flex items-center justify-center text-sm font-semibold",children:"Y"})]},e.id))}),v?(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:f.map(e=>(0,a.jsx)("button",{onClick:()=>M(e),className:"w-10 h-10 text-2xl hover:bg-gray-100 rounded-lg transition-colors flex items-center justify-center",children:e},e))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Click an emoji to send it to the community"})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Consent required to participate"})]})]})})]}),(0,a.jsx)(r.M,{children:w&&(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(n.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"card p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 text-violet-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Join the Community"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Connect with other cosmic souls through emoji-only chat. Your privacy is protected."})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(x,{className:"w-5 h-5 text-green-500 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Safe Communication"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Only emojis allowed - no text messages"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-blue-500 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Privacy Protected"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Your personal data stays private"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-pink-500 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Cosmic Connections"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Find your astrological soulmates"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>A(!1),className:"btn btn-secondary flex-1",children:"Maybe Later"}),(0,a.jsx)("button",{onClick:()=>A(!0),className:"btn btn-primary flex-1",children:"Join Community"})]})]})})})]})})}},5095:function(e,t,s){"use strict";s.d(t,{M:function(){return p}});var a=s(2265),i=s(1534);function n(){let e=(0,a.useRef)(!1);return(0,i.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var r=s(8345),c=s(4252),l=s(3576);class o extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:t}){let s=(0,a.useId)(),i=(0,a.useRef)(null),n=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)(()=>{let{width:e,height:a,top:r,left:c}=n.current;if(t||!i.current||!e||!a)return;i.current.dataset.motionPopId=s;let l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${r}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),a.createElement(o,{isPresent:t,childRef:i,sizeRef:n},a.cloneElement(e,{ref:i}))}let u=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:n,presenceAffectsLayout:r,mode:o})=>{let u=(0,l.h)(d),x=(0,a.useId)(),h=(0,a.useMemo)(()=>({id:x,initial:t,isPresent:s,custom:n,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))}),r?void 0:[s]);return(0,a.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),a.useEffect(()=>{s||u.size||!i||i()},[s]),"popLayout"===o&&(e=a.createElement(m,{isPresent:s},e)),a.createElement(c.O.Provider,{value:h},e)};function d(){return new Map}var x=s(8881),h=s(3223);let f=e=>e.key||"",p=({children:e,custom:t,initial:s=!0,onExitComplete:c,exitBeforeEnter:l,presenceAffectsLayout:o=!0,mode:m="sync"})=>{var d;(0,h.k)(!l,"Replace exitBeforeEnter with mode='wait'");let p=(0,a.useContext)(x.p).forceRender||function(){let e=n(),[t,s]=(0,a.useState)(0),i=(0,a.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,a.useCallback)(()=>r.Wi.postRender(i),[i]),t]}()[0],y=n(),g=function(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}(e),j=g,N=(0,a.useRef)(new Map).current,v=(0,a.useRef)(j),D=(0,a.useRef)(new Map).current,w=(0,a.useRef)(!0);if((0,i.L)(()=>{w.current=!1,function(e,t){e.forEach(e=>{let s=f(e);t.set(s,e)})}(g,D),v.current=j}),d=()=>{w.current=!0,D.clear(),N.clear()},(0,a.useEffect)(()=>()=>d(),[]),w.current)return a.createElement(a.Fragment,null,j.map(e=>a.createElement(u,{key:f(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:m},e)));j=[...j];let C=v.current.map(f),b=g.map(f),k=C.length;for(let e=0;e<k;e++){let t=C[e];-1!==b.indexOf(t)||N.has(t)||N.set(t,void 0)}return"wait"===m&&N.size&&(j=[]),N.forEach((e,s)=>{if(-1!==b.indexOf(s))return;let i=D.get(s);if(!i)return;let n=C.indexOf(s),r=e;r||(r=a.createElement(u,{key:f(i),isPresent:!1,onExitComplete:()=>{N.delete(s);let e=Array.from(D.keys()).filter(e=>!b.includes(e));if(e.forEach(e=>D.delete(e)),v.current=g.filter(t=>{let a=f(t);return a===s||e.includes(a)}),!N.size){if(!1===y.current)return;p(),c&&c()}},custom:t,presenceAffectsLayout:o,mode:m},i),N.set(s,r)),j.splice(n,0,r)}),j=j.map(e=>{let t=e.key;return N.has(t)?e:a.createElement(u,{key:f(e),isPresent:!0,presenceAffectsLayout:o,mode:m},e)}),a.createElement(a.Fragment,null,N.size?j:j.map(e=>(0,a.cloneElement)(e)))}}},function(e){e.O(0,[429,9064,2971,2117,1744],function(){return e(e.s=5488)}),_N_E=e.O()}]);